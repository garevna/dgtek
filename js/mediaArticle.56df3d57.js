(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mediaArticle"],{4162:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-sheet",{staticClass:"overflow-y-auto",staticStyle:{"margin-top":"300px"}},[o("v-container",{attrs:{fluid:""}},[!t.close&&t.article?o("v-card",{staticClass:"mx-auto",attrs:{"max-width":"1000",flat:"",tile:""}},[o("v-card-title",{staticClass:"mx-auto"},[o("v-text-field",{attrs:{outlined:"",label:"Article title"},model:{value:t.article.title,callback:function(e){t.$set(t.article,"title",e)},expression:"article.title"}},[o("v-icon",{attrs:{slot:"append",small:"",color:"info"},slot:"append"},[t._v("mdi-pencil")])],1)],1),o("v-card-title",{staticClass:"mx-auto"},[o("v-text-field",{attrs:{outlined:"",label:"Article url"},model:{value:t.article.ref,callback:function(e){t.$set(t.article,"ref",e)},expression:"article.ref"}},[o("v-icon",{attrs:{slot:"append",small:"",color:"info"},slot:"append"},[t._v("mdi-pencil")])],1)],1),o("v-row",{staticClass:"mx-10"},[o("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[o("v-dialog",{ref:"dialog",attrs:{"return-value":t.date,persistent:"",width:"290px"},on:{"update:returnValue":function(e){t.date=e},"update:return-value":function(e){t.date=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[o("v-text-field",t._g({attrs:{label:"Article date","prepend-icon":"mdi-date-range",readonly:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},a))]}}],null,!1,805824174),model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[o("v-date-picker",{attrs:{scrollable:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[o("v-spacer"),o("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.modal=!1}}},[t._v("Cancel")]),o("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.dialog.save(t.date)}}},[t._v("OK")])],1)],1)],1),o("v-col",{attrs:{cols:"12",sm:"6",md:"4",lg:"4"}},[o("v-card-text",[o("v-text-field",{attrs:{outlined:"",label:"Source"},model:{value:t.article.source,callback:function(e){t.$set(t.article,"source",e)},expression:"article.source"}},[o("v-icon",{attrs:{slot:"append",small:"",color:"info"},slot:"append"},[t._v("mdi-pencil")])],1)],1)],1),o("v-col",{staticClass:"d-flex align-start",attrs:{cols:"12",sm:"4",md:"2",lg:"1"}},[o("v-card-text",[o("v-tooltip",{attrs:{top:"",color:"info"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[o("v-btn",t._g({attrs:{icon:""},on:{click:function(e){return t.$refs.logo.click()}}},a),[o("v-avatar",{attrs:{color:"#dde"}},[t.article.logo?o("v-img",{attrs:{src:t.article.logo,onerror:"imageError"}}):t._e()],1)],1)]}}],null,!1,4110156726)},[o("span",[t._v("Change avatar via upload")])])],1)],1),o("input",{ref:"logo",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(e){return t.uploadLogo(e.target.files[0])}}})],1)],1):t._e(),o("NewsBottom",{attrs:{save:t.save,pictureSrc:t.article.logo,avatarSrc:t.article.logo_user},on:{"update:save":function(e){t.save=e},"update:pictureSrc":function(e){return t.$set(t.article,"logo",e)},"update:picture-src":function(e){return t.$set(t.article,"logo",e)},"update:avatarSrc":function(e){return t.$set(t.article,"logo_user",e)},"update:avatar-src":function(e){return t.$set(t.article,"logo_user",e)}}}),o("ErrorPopup",{attrs:{visibility:t.errorPopupVisible,errorName:t.errorName,details:t.errorStack},on:{"update:visibility":function(e){t.errorPopupVisible=e}}})],1)],1)},r=[],i=(o("d3b7"),o("3ca3"),o("2ca0"),o("ddb0"),o("2b3d"),o("96cf"),o("1da1")),n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-row",[o("v-bottom-navigation",{staticClass:"primary",attrs:{app:"",fixed:"",dark:""}},[o("v-tooltip",{attrs:{top:"",color:"info"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[o("v-btn",t._g({on:{click:function(e){return t.$router.push({name:"news"})}}},a),[o("v-icon",[t._v("mdi-file-search")])],1)]}}])},[o("span",[t._v("All blog articles")])]),o("v-tooltip",{attrs:{top:"",color:"info"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[o("v-btn",t._g({attrs:{text:""},on:{click:function(e){return t.$emit("update:save",!0)}}},a),[o("v-icon",[t._v("mdi-content-save")])],1)]}}])},[o("span",[t._v("Save article info")])]),o("v-tooltip",{attrs:{top:"",color:"info"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[o("v-btn",t._g({on:{click:function(e){t.logoDialog=!0}}},a),[o("v-icon",[t._v("mdi-image-search")])],1)]}}])},[o("span",[t._v("Select logo from server")])])],1),o("ImageGallery",{attrs:{moduleName:"news",staticEndpoint:t.staticLogoEndpoint,removeEndpoint:t.logosEndpoint,maxWidth:"120",maxHeight:"80",dialog:t.logoDialog,image:t.logoURL},on:{"update:dialog":function(e){t.logoDialog=e},"update:image":function(e){t.logoURL=e}}})],1)},l=[],c=(o("a4d3"),o("4de4"),o("4160"),o("e439"),o("dbb4"),o("b64b"),o("159b"),o("ade3")),s=o("2f62"),u=o("686a");function p(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,a)}return o}function d(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?p(Object(o),!0).forEach((function(e){Object(c["a"])(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):p(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var v={components:{ImageGallery:u["a"]},props:["save","logoSrc"],data:function(){return{logoDialog:!1,logoURL:""}},computed:d({},Object(s["b"])("news",["staticLogoEndpoint","logosEndpoint"])),watch:{logoURL:function(t){this.$emit("update:logoSrc",t),this.$emit("update:logoDialog",!1)}}},f=v,m=o("2877"),g=o("6544"),b=o.n(g),h=o("b81c"),_=o("8336"),w=o("132d"),x=o("0fd9"),y=o("3a2f"),V=Object(m["a"])(f,n,l,!1,null,null,null),k=V.exports;b()(V,{VBottomNavigation:h["a"],VBtn:_["a"],VIcon:w["a"],VRow:x["a"],VTooltip:y["a"]});var O=o("96cc"),S={components:{NewsBottom:k,ErrorPopup:O["a"]},data:function(){return{id:null,date:null,modal:!1,article:null,logoLimit:7e4,close:!1,save:!1,errorPopupVisible:!1,removePopupVisible:!1,confirmRemoving:!1,uploadDailog:!1,errorName:"",errorStack:""}},watch:{id:function(){this.init()},date:function(t){this.article.published_at=t},save:function(t){t&&(this.saveArticle(),this.save=!1)},confirmRemoving:function(t){var e=this;t&&this.$store.dispatch("news/REMOVE_ARTICLE",this.id).then((function(){e.removePopupVisible=!1,e.close=!0}))}},methods:{testFile:function(t,e){return t.type.startsWith("image")?t.size>e?(this.errorName="Invalid file size",this.errorStack="File is too large. Please select file up to ".concat(Math.round(e/1e3),"Kb"),this.errorPopupVisible=!0,!1):Boolean(t):(this.errorName="Invalid file type",this.errorStack="File must be an image of any type such as: jpg, png, gif...",this.errorPopupVisible=!0,!1)},uploadLogo:function(t){this.testFile(t,this.logoLimit)&&(this.article.logoFile=t,this.article.logo=URL.createObjectURL(t))},init:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("news/GET_ARTICLE_BY_ID",t.id);case 2:t.article=e.sent,t.date=t.article.published_at;case 4:case"end":return e.stop()}}),e)})))()},saveArticle:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("news/SAVE_ARTICLE_BY_ID",{id:t.id,article:t.article});case 2:t.$router.push({name:"blog"});case 3:case"end":return e.stop()}}),e)})))()},removeArticle:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.confirmRemoving=!1,t.removePopupVisible=!0;case 2:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.id=this.$route.params.article,this.init()}},R=S,j=o("8212"),E=o("b0af"),P=o("99d9"),$=o("62ad"),C=o("a523"),L=o("2e4b"),D=o("169a"),A=o("adda"),I=o("8dd9"),N=o("2fa4"),T=o("8654"),B=Object(m["a"])(R,a,r,!1,null,null,null);e["default"]=B.exports;b()(B,{VAvatar:j["a"],VBtn:_["a"],VCard:E["a"],VCardText:P["b"],VCardTitle:P["c"],VCol:$["a"],VContainer:C["a"],VDatePicker:L["a"],VDialog:D["a"],VIcon:w["a"],VImg:A["a"],VRow:x["a"],VSheet:I["a"],VSpacer:N["a"],VTextField:T["a"],VTooltip:y["a"]})}}]);
//# sourceMappingURL=mediaArticle.56df3d57.js.map